# Staging Environment Configuration Template
# Copy this file and set the actual values for your staging environment
# This file should NOT be committed to version control with real values

# ============================================================================
# RAILWAY CONFIGURATION
# ============================================================================
# Railway CLI authentication token (get from Railway dashboard > Account > Tokens)
RAILWAY_TOKEN=f0604666-8094-46cd-a8e0-a7c622e70640

# Railway project ID for staging (get from Railway project URL or CLI)
RAILWAY_PROJECT_ID_STAGING=a589cf47-bc43-4796-b185-2dcd4892a247

# ============================================================================
# ENVIRONMENT CONFIGURATION
# ============================================================================
ENVIRONMENT=staging

# ============================================================================
# SERVICE URLS (Auto-configured by Railway)
# ============================================================================
# These URLs are automatically set by Railway during deployment
# You can override them if using custom domains
FRONTEND_URL_STAGING=https://anime-frontend-staging.railway.app
BACKEND_URL_STAGING=https://anime-backend-staging.railway.app

# Database URL is automatically provided by Railway PostgreSQL service
# Format: postgresql://username:password@host:port/database
DATABASE_URL_STAGING=postgresql://user:pass@host:port/anime_db_staging

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
# Frontend-Backend Communication
# Staging allows more permissive CORS for testing
CORS_ORIGINS_STAGING=https://anime-frontend-staging.railway.app

# Additional allowed origins for staging (comma-separated)
# Include localhost for local development testing
CORS_ADDITIONAL_ORIGINS_STAGING=http://localhost:3000,http://localhost:8080,http://127.0.0.1:3000,http://127.0.0.1:8080

# CORS credentials support (true/false)
CORS_ALLOW_CREDENTIALS=true

# CORS allowed methods (comma-separated)
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH

# CORS allowed headers (comma-separated)
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With,X-Debug-Mode

# CORS max age for preflight requests (seconds)
CORS_MAX_AGE=3600

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
DB_NAME=anime_db_staging
DB_USER=anime_user
DB_HOST=localhost
DB_PORT=5432

# Connection pool settings (smaller for staging)
DB_POOL_SIZE=3
DB_MAX_OVERFLOW=5
DB_POOL_RECYCLE=300
DB_POOL_PRE_PING=true

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================
DEBUG=true
LOG_LEVEL=debug

# API Configuration
API_PREFIX=/api/v1
API_TITLE=Anime API (Staging)
API_VERSION=1.0.0-staging

# Security settings (less strict for staging)
SECRET_KEY=staging_secret_key_change_me
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

# ============================================================================
# HEALTH CHECK CONFIGURATION
# ============================================================================
HEALTH_CHECK_TIMEOUT=30
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_INTERVAL=30

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
# Security headers (less strict for staging)
SECURE_HEADERS=true
FORCE_HTTPS=false

# Content Security Policy (more permissive for staging)
CSP_DEFAULT_SRC='self' 'unsafe-inline' 'unsafe-eval'
CSP_SCRIPT_SRC='self' 'unsafe-inline' 'unsafe-eval'
CSP_STYLE_SRC='self' 'unsafe-inline'
CSP_IMG_SRC='self' data: https: http:
CSP_CONNECT_SRC='self' https: http: ws: wss:

# ============================================================================
# MONITORING AND LOGGING
# ============================================================================
# Enable detailed logging for debugging
ENABLE_ACCESS_LOGS=true
ENABLE_ERROR_TRACKING=true
ENABLE_DEBUG_LOGS=true

# Log format (text for easier reading in staging)
LOG_FORMAT=text

# ============================================================================
# PERFORMANCE CONFIGURATION
# ============================================================================
# Uvicorn workers (fewer for staging)
WORKERS=2
WORKER_CLASS=uvicorn.workers.UvicornWorker
WORKER_CONNECTIONS=500
MAX_REQUESTS=500
MAX_REQUESTS_JITTER=50

# ============================================================================
# FEATURE FLAGS
# ============================================================================
# Enable/disable features (more permissive for staging)
ENABLE_DOCS=true
ENABLE_REDOC=true
ENABLE_METRICS=true
ENABLE_DEBUG_ENDPOINTS=true

# ============================================================================
# DEVELOPMENT FEATURES
# ============================================================================
# Features only available in staging
ENABLE_MOCK_DATA=true
ENABLE_TEST_ENDPOINTS=true
ENABLE_CORS_DEBUG=true
